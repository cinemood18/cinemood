<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 20 IMDb Movies</title>
    <style>
        body {
    transition: opacity 0.5s ease-in-out;
}
body.hidden {
    opacity: 0;
}
        body {
            font-family: Arial, sans-serif;
            background-image: url(mveimg.jpg);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #F4F4F4;
            color: #FFC857;
            margin: 0;
            padding: 0;
        }
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #1B1F3B;
            padding: 15px 20px;
        }
        .header a {
            color: #FFC857;
            text-decoration: none;
            margin: 0 15px;
            font-weight: bold;
        }
        .header a:hover {
            color: #D72638;
            text-decoration: underline;
        }
        .nav-links, .auth-links {
            display: flex;
        }
        main {
            padding: 20px;
        }
        .movie-category {
            margin-bottom: 30px;
        }
        .movie-category h2 {
            color: #1B1F3B;
            background-color: #FFC857;
            padding: 10px;
            border-radius: 5px;
        }
        .movie-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        .movie {
            background-color: #1B1F3B;
            color: #FFC857;
            width: 250px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            text-align: center;
            transition: transform 0.2s;
        }
        .movie:hover {
            transform: scale(1.05);
        }
        .movie img {
            width: 100%;
            height: 350px;
            object-fit: cover;
        }
        .movie h3 {
            margin: 10px 0;
            font-size: 18px;
        }
        .movie p {
            margin: 5px 10px;
            font-size: 14px;
        }
        .movie span {
            display: block;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 0;
            color: #D72638;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #1B1F3B;
            color: #FFC857;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="nav-links">
            <a href="mainfinal.html">Home</a>
            <a href="OSCAR.html">Oscars</a>
            <a href="IMDB.html">IMDb</a>
            <a href="UNDERRATED.html">Underrated</a>
        </div>
        <div class="auth-links">
            <a href="#login">Login</a>
            <a href="#signup">Sign Up</a>
        </div>
    </div>

    <main>
        <header>
            <h1>Top 20 IMDb Movies</h1>
            <p>Explore the highest-rated movies of all time, as per IMDb ratings!</p>
        </header>

        <section class="movie-category">
            <div class="movie-list">
                <div class="movie">
                    <img id="image-1" src="" alt="The Shawshank Redemption Poster" loading="lazy">
                    <h3>The Shawshank Redemption (1994)</h3>
                    <p><strong>Director:</strong> Frank Darabont</p>
                    <p><strong>IMDb Rating:</strong> 9.3</p>
                    <span>#1</span>
                </div>
                <div class="movie">
                    <img id="image-2" src="" alt="The Godfather Poster" loading="lazy">
                    <h3>The Godfather (1972)</h3>
                    <p><strong>Director:</strong> Francis Ford Coppola</p>
                    <p><strong>IMDb Rating:</strong> 9.2</p>
                    <span>#2</span>
                </div>
                <div class="movie">
                    <img id="image-3" src="" alt="The Dark Knight Poster" loading="lazy">
                    <h3>The Dark Knight (2008)</h3>
                    <p><strong>Director:</strong> Christopher Nolan</p>
                    <p><strong>IMDb Rating:</strong> 9.0</p>
                    <span>#3</span>
                </div>
                <div class="movie">
                    <img id="image-4" src="" alt="The Godfather Part II Poster" loading="lazy">
                    <h3>The Godfather Part II (1974)</h3>
                    <p><strong>Director:</strong> Francis Ford Coppola</p>
                    <p><strong>IMDb Rating:</strong> 9.0</p>
                    <span>#4</span>
                </div>
                <div class="movie">
                    <img id="image-5" src="" alt="12 Angry Men Poster" loading="lazy">
                    <h3>12 Angry Men (1957)</h3>
                    <p><strong>Director:</strong> Sidney Lumet</p>
                    <p><strong>IMDb Rating:</strong> 9.0</p>
                    <span>#5</span>
                </div>
                <div class="movie">
                    <img id="image-6" src="" alt="Schindler's List Poster" loading="lazy">
                    <h3>Schindler's List (1993)</h3>
                    <p><strong>Director:</strong> Steven Spielberg</p>
                    <p><strong>IMDb Rating:</strong> 8.9</p>
                    <span>#6</span>
                </div>
                <div class="movie">
                    <img id="image-7" src="" alt="The Lord of the Rings: The Return of the King Poster" loading="lazy">
                    <h3>The Lord of the Rings: The Return of the King (2003)</h3>
                    <p><strong>Director:</strong> Peter Jackson</p>
                    <p><strong>IMDb Rating:</strong> 8.9</p>
                    <span>#7</span>
                </div>
                <div class="movie">
                    <img id="image-8" src="" alt="Pulp Fiction Poster" loading="lazy">
                    <h3>Pulp Fiction (1994)</h3>
                    <p><strong>Director:</strong> Quentin Tarantino</p>
                    <p><strong>IMDb Rating:</strong> 8.9</p>
                    <span>#8</span>
                </div>
                <div class="movie">
                    <img id="image-9" src="" alt="The Lord of the Rings: The Fellowship of the Ring Poster" loading="lazy">
                    <h3>The Lord of the Rings: The Fellowship of the Ring (2001)</h3>
                    <p><strong>Director:</strong> Peter Jackson</p>
                    <p><strong>IMDb Rating:</strong> 8.8</p>
                    <span>#9</span>
                </div>
                <div class="movie">
                    <img id="image-10" src="" alt="The Good, the Bad and the Ugly Poster" loading="lazy">
                    <h3>The Good, the Bad and the Ugly (1966)</h3>
                    <p><strong>Director:</strong> Sergio Leone</p>
                    <p><strong>IMDb Rating:</strong> 8.8</p>
                    <span>#10</span>
                </div>
                <div class="movie">
                    <img id="image-11" src="" alt="Forrest Gump Poster" loading="lazy">
                    <h3>Forrest Gump (1994)</h3>
                    <p><strong>Director:</strong> Robert Zemeckis</p>
                    <p><strong>IMDb Rating:</strong> 8.8</p>
                    <span>#11</span>
                </div>
                <div class="movie">
                    <img id="image-12" src="" alt="Fight Club Poster" loading="lazy">
                    <h3>Fight Club (1999)</h3>
                    <p><strong>Director:</strong> David Fincher</p>
                    <p><strong>IMDb Rating:</strong> 8.8</p>
                    <span>#12</span>
                </div>
                <div class="movie">
                    <img id="image-13" src="" alt="Inception Poster" loading="lazy">
                    <h3>Inception (2010)</h3>
                    <p><strong>Director:</strong> Christopher Nolan</p>
                    <p><strong>IMDb Rating:</strong> 8.8</p>
                    <span>#13</span>
                </div>
                <div class="movie">
                    <img id="image-14" src="" alt="Star Wars: Episode V - The Empire Strikes Back Poster" loading="lazy">
                    <h3>Star Wars: Episode V - The Empire Strikes Back (1980)</h3>
                    <p><strong>Director:</strong> Irvin Kershner</p>
                    <p><strong>IMDb Rating:</strong> 8.7</p>
                    <span>#14</span>
                </div>
                <div class="movie">
                    <img id="image-15" src="" alt="The Lord of the Rings: The Two Towers Poster" loading="lazy">
                    <h3>The Lord of the Rings: The Two Towers (2002)</h3>
                    <p><strong>Director:</strong> Peter Jackson</p>
                    <p><strong>IMDb Rating:</strong> 8.7</p>
                    <span>#15</span>
                </div>
                <div class="movie">
                    <img id="image-16" src="" alt="The Matrix Poster" loading="lazy">
                    <h3>The Matrix (1999)</h3>
                    <p><strong>Director:</strong> The Wachowskis</p>
                    <p><strong>IMDb Rating:</strong> 8.7</p>
                    <span>#16</span>
                </div>
                <div class="movie">
                    <img id="image-17" src="" alt="Goodfellas Poster" loading="lazy">
                    <h3>Goodfellas (1990)</h3>
                    <p><strong>Director:</strong> Martin Scorsese</p>
                    <p><strong>IMDb Rating:</strong> 8.7</p>
                    <span>#17</span>
                </div>
                <div class="movie">
                    <img id="image-18" src="" alt="One Flew Over the Cuckoo's Nest Poster" loading="lazy">
                    <h3>One Flew Over the Cuckoo's Nest (1975)</h3>
                    <p><strong>Director:</strong> Milos Forman</p>
                    <p><strong>IMDb Rating:</strong> 8.7</p>
                    <span>#18</span>
                </div>
                <div class="movie">
                    <img id="image-19" src="" alt="Se7en Poster" loading="lazy">
                    <h3>Se7en (1995)</h3>
                    <p><strong>Director:</strong> David Fincher</p>
                    <p><strong>IMDb Rating:</strong> 8.6</p>
                    <span>#19</span>
                </div>
                <div class="movie">
                    <img id="image-20" src="" alt="Seven Samurai Poster" loading="lazy">
                    <h3>Seven Samurai (1954)</h3>
                    <p><strong>Director:</strong> Akira Kurosawa</p>
                    <p><strong>IMDb Rating:</strong> 8.6</p>
                    <span>#20</span>
                </div>                
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 IMDb Top Movies. All rights reserved.</p>
    </footer>
   <script>

    const apiKey = '417f94d1'; // Replace with your OMDB API key

    const movies = [
        { "id": 1, "title": "The Shawshank Redemption", "year": 1994, "director": "Frank Darabont", "rating": 9.3 },
        { "id": 2, "title": "The Godfather", "year": 1972, "director": "Francis Ford Coppola", "rating": 9.2 },
        { "id": 3, "title": "The Dark Knight", "year": 2008, "director": "Christopher Nolan", "rating": 9.0 },
        { "id": 4, "title": "The Godfather Part II", "year": 1974, "director": "Francis Ford Coppola", "rating": 9.0 },
        { "id": 5, "title": "12 Angry Men", "year": 1957, "director": "Sidney Lumet", "rating": 9.0 },
        { "id": 6, "title": "Schindler's List", "year": 1993, "director": "Steven Spielberg", "rating": 8.9 },
        { "id": 7, "title": "The Lord of the Rings: The Return of the King", "year": 2003, "director": "Peter Jackson", "rating": 8.9 },
        { "id": 8, "title": "Pulp Fiction", "year": 1994, "director": "Quentin Tarantino", "rating": 8.9 },
        { "id": 9, "title": "The Lord of the Rings: The Fellowship of the Ring", "year": 2001, "director": "Peter Jackson", "rating": 8.8 },
        { "id": 10, "title": "The Good, the Bad and the Ugly", "year": 1966, "director": "Sergio Leone", "rating": 8.8 },
        { "id": 11, "title": "Forrest Gump", "year": 1994, "director": "Robert Zemeckis", "rating": 8.8 },
        { "id": 12, "title": "Fight Club", "year": 1999, "director": "David Fincher", "rating": 8.8 },
        { "id": 13, "title": "Inception", "year": 2010, "director": "Christopher Nolan", "rating": 8.8 },
        { "id": 14, "title": "Star Wars: Episode V - The Empire Strikes Back", "year": 1980, "director": "Irvin Kershner", "rating": 8.7 },
        { "id": 15, "title": "The Lord of the Rings: The Two Towers", "year": 2002, "director": "Peter Jackson", "rating": 8.7 },
        { "id": 16, "title": "The Matrix", "year": 1999, "director": "The Wachowskis", "rating": 8.7 },
        { "id": 17, "title": "Goodfellas", "year": 1990, "director": "Martin Scorsese", "rating": 8.7 },
        { "id": 18, "title": "One Flew Over the Cuckoo's Nest", "year": 1975, "director": "Milos Forman", "rating": 8.7 },
        { "id": 19, "title": "Se7en", "year": 1995, "director": "David Fincher", "rating": 8.6 },
        { "id": 20, "title": "Seven Samurai", "year": 1954, "director": "Akira Kurosawa", "rating": 8.6 }
    ];

    async function fetchMovies() {
        try {
            // Try to load images from localStorage
            const storedImages = JSON.parse(localStorage.getItem('movieImages'));
            if (storedImages && storedImages.length === movies.length) {
                console.log('Loaded images from localStorage');
                updateMovieImages(storedImages);
                return; // Exit if images are found in localStorage
            }

            // Fetch posters for the movies
            const images = await Promise.all(
                movies.map(async (movie) => {
                    try {
                        const response = await fetch(
                            `https://www.omdbapi.com/?t=${encodeURIComponent(movie.title)}&y=${movie.year}&apikey=${apiKey}`
                        );

                        if (!response.ok) {
                            throw new Error(`OMDb API responded with status ${response.status}`);
                        }

                        const data = await response.json();

                        if (data.Response === "True") {
                            return {
                                id: movie.id,
                                poster: data.Poster !== "N/A" ? data.Poster : 'path/to/default-placeholder.jpg',
                                title: movie.title,
                                year: movie.year,
                                director: movie.director
                            };
                        } else {
                            console.error(`OMDb Error for ${movie.title}: ${data.Error}`);
                            return { id: movie.id, poster: 'path/to/default-placeholder.jpg' };
                        }
                    } catch (error) {
                        console.error(`Error fetching data for ${movie.title}: ${error.message}`);
                        return { id: movie.id, poster: 'path/to/default-placeholder.jpg' }; // Fallback image
                    }
                })
            );

            // Save images to localStorage for future use
            localStorage.setItem('movieImages', JSON.stringify(images));
            updateMovieImages(images);

        } catch (error) {
            console.error('Error fetching or storing movie posters:', error.message);
        }
    }

    // Update the movie cards with images and details
    function updateMovieImages(images) {
        const movieList = document.querySelector('.movie-list');
        movieList.innerHTML = ''; // Clear any existing content

        images.forEach((image) => {
            const movie = movies.find(m => m.id === image.id); // Find the correct movie object
            const movieCard = document.createElement('div');
            movieCard.classList.add('movie');
            movieCard.innerHTML = `
                <img id="image-${image.id}" src="${image.poster}" alt="${image.title} Movie Poster">
                <h3>${image.title} (${image.year})</h3>
                <p><strong>Directed by:</strong> ${image.director}</p>
                <p><strong>IMDb Rating:</strong> ${movie.rating}</p>
                <span>${getMovieLabel(movie.id)}</span> <!-- Dynamically generated label -->
            `;
            movieList.appendChild(movieCard);
        });
    }

    // Function to get the movie label (Must Watch, Underrated, etc.)
    function getMovieLabel(movieId) {
    const labels = {
        1: "#1",
        2: "#2",
        3: "#3",
        4: "#4",
        5: "#5",
        6: "#6",
        7: "#7",
        8: "#8",
        9: "#9",
        10: "#10",
        11: "#11",
        12: "#12",
        13: "#13",
        14: "#14",
        15: "#15",
        16: "#16",
        17: "#17",
        18: "#18",
        19: "#19",
        20: "#20"
    };
    return labels[movieId] || "Top Rated"; // Fallback if no label is found
}


    // Retry if an image fails to load
    document.addEventListener(
        'error',
        (event) => {
            const element = event.target;
            if (element.tagName === 'IMG') {
                console.error(`Image failed to load: ${element.src}`);
                element.src = 'path/to/default-placeholder.jpg'; // Set fallback image
            }
        },
        true
    );

    // Call the function to fetch movie posters
    fetchMovies();
</script>

  
</body>
</html>
